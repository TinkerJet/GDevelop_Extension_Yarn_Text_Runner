{
  "author": "",
  "category": "General",
  "extensionNamespace": "",
  "fullName": "Yarn Text Runner",
  "gdevelopVersion": "",
  "helpPath": "",
  "iconUrl": "",
  "name": "Yarn_Text_Runner",
  "previewIconUrl": "",
  "shortDescription": "The Yarn text runner is some logic for any dialogue that needs the typewriter spelling effect. Some examples would be for dialogue, characters reading signs, etc. It relies on Yarn for its functionality.",
  "version": "0.0.1",
  "description": [
    "To use:",
    "",
    "In your event sheet, at the beginning of the scene, load dialogue data from JSON file and start dialogue from branch. (\"Start\" is default.) The loading and starting only need to be triggered once.",
    "",
    "Create a BBtext object, then add the yarn text runner to your event sheet. Adjust the settings to your liking."
  ],
  "tags": [
    "dialogue",
    "yarn"
  ],
  "authorIds": [
    "9TRESvrBQfbuFWZWFjRhCEncnfq1"
  ],
  "dependencies": [],
  "globalVariables": [],
  "sceneVariables": [],
  "eventsFunctions": [
    {
      "fullName": "",
      "functionType": "Action",
      "name": "Yarn_Text_Runner",
      "sentence": "",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Comment",
          "color": {
            "b": 109,
            "g": 230,
            "r": 255,
            "textB": 0,
            "textG": 0,
            "textR": 0
          },
          "comment": "If the text object is visible, start/reset timers.\n\nThe textScrollSpeed timer determines the speed of the typewriter spelling out words. (Also known as scrolling text.)\n\nyarnCoolDownTimer prevents accidentally moving to the next line before the text finishes scrolling."
        },
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": true,
                "value": "OpacityCapability::OpacityBehavior::Value"
              },
              "parameters": [
                "Dialogue_Text",
                "Opacity",
                "=",
                "0"
              ]
            },
            {
              "type": {
                "value": "BuiltinCommonInstructions::Once"
              },
              "parameters": []
            }
          ],
          "actions": [
            {
              "type": {
                "value": "ResetTimer"
              },
              "parameters": [
                "",
                "\"textScrollSpeed\""
              ]
            },
            {
              "type": {
                "value": "ResetTimer"
              },
              "parameters": [
                "",
                "\"yarnCoolDownTimer\""
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::Comment",
          "color": {
            "b": 109,
            "g": 230,
            "r": 255,
            "textB": 0,
            "textG": 0,
            "textR": 0
          },
          "comment": "Start spelling out text."
        },
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": true,
                "value": "OpacityCapability::OpacityBehavior::Value"
              },
              "parameters": [
                "Dialogue_Text",
                "Opacity",
                "=",
                "0"
              ]
            },
            {
              "type": {
                "value": "DialogueTree::IsDialogueLineType"
              },
              "parameters": [
                "\"text\""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "BBText::SetBBText"
              },
              "parameters": [
                "Dialogue_Text",
                "=",
                "DialogueTree::ClippedLineText()"
              ]
            }
          ],
          "events": [
            {
              "type": "BuiltinCommonInstructions::Comment",
              "color": {
                "b": 109,
                "g": 230,
                "r": 255,
                "textB": 0,
                "textG": 0,
                "textR": 0
              },
              "comment": "If Dialogue_Text_Scroll_Speed is 0 or a negative number, set it to the default typing speed of 0.09 seconds. Otherwise, use the developer's choice."
            },
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "value": "NumberVariable"
                  },
                  "parameters": [
                    "Dialogue_Text_Scroll_Speed",
                    "<=",
                    "0"
                  ]
                },
                {
                  "type": {
                    "value": "CompareTimer"
                  },
                  "parameters": [
                    "",
                    "\"textScrollSpeed\"",
                    ">",
                    "0.09"
                  ]
                },
                {
                  "type": {
                    "value": "DialogueTree::IsDialogueRunning"
                  },
                  "parameters": []
                },
                {
                  "type": {
                    "value": "BuiltinCommonInstructions::Once"
                  },
                  "parameters": []
                }
              ],
              "actions": [
                {
                  "type": {
                    "value": "DialogueTree::ScrollClippedText"
                  },
                  "parameters": []
                },
                {
                  "type": {
                    "value": "ResetTimer"
                  },
                  "parameters": [
                    "",
                    "\"textScrollSpeed\""
                  ]
                }
              ]
            },
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "inverted": true,
                    "value": "NumberVariable"
                  },
                  "parameters": [
                    "Dialogue_Text_Scroll_Speed",
                    "<=",
                    "0"
                  ]
                },
                {
                  "type": {
                    "value": "CompareTimer"
                  },
                  "parameters": [
                    "",
                    "\"textScrollSpeed\"",
                    ">",
                    "Dialogue_Text_Scroll_Speed"
                  ]
                },
                {
                  "type": {
                    "value": "DialogueTree::IsDialogueRunning"
                  },
                  "parameters": []
                },
                {
                  "type": {
                    "value": "BuiltinCommonInstructions::Once"
                  },
                  "parameters": []
                }
              ],
              "actions": [
                {
                  "type": {
                    "value": "DialogueTree::ScrollClippedText"
                  },
                  "parameters": []
                },
                {
                  "type": {
                    "value": "ResetTimer"
                  },
                  "parameters": [
                    "",
                    "\"textScrollSpeed\""
                  ]
                }
              ]
            },
            {
              "type": "BuiltinCommonInstructions::Comment",
              "color": {
                "b": 109,
                "g": 230,
                "r": 255,
                "textB": 0,
                "textG": 0,
                "textR": 0
              },
              "comment": "If we're in Subtitle Mode..."
            },
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "value": "BooleanVariable"
                  },
                  "parameters": [
                    "Subtitle_Mode",
                    "True",
                    ""
                  ]
                }
              ],
              "actions": [],
              "events": [
                {
                  "type": "BuiltinCommonInstructions::Comment",
                  "color": {
                    "b": 109,
                    "g": 230,
                    "r": 255,
                    "textB": 0,
                    "textG": 0,
                    "textR": 0
                  },
                  "comment": "Once the text has finished being typed out, start or reset the timer."
                },
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [
                    {
                      "type": {
                        "value": "DialogueTree::HasClippedTextScrollingCompleted"
                      },
                      "parameters": []
                    },
                    {
                      "type": {
                        "value": "BuiltinCommonInstructions::Once"
                      },
                      "parameters": []
                    }
                  ],
                  "actions": [
                    {
                      "type": {
                        "value": "ResetTimer"
                      },
                      "parameters": [
                        "",
                        "\"yarnCoolDownTimer\""
                      ]
                    }
                  ]
                },
                {
                  "type": "BuiltinCommonInstructions::Comment",
                  "color": {
                    "b": 109,
                    "g": 230,
                    "r": 255,
                    "textB": 0,
                    "textG": 0,
                    "textR": 0
                  },
                  "comment": "If yarnCoolDownTimer is 0 or a negative number, set the default speed of 1.5 seconds. Otherwise, use the input."
                },
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [
                    {
                      "type": {
                        "value": "DialogueTree::HasClippedTextScrollingCompleted"
                      },
                      "parameters": []
                    },
                    {
                      "type": {
                        "value": "NumberVariable"
                      },
                      "parameters": [
                        "Time_To_Next_Subtitle_Line",
                        "<=",
                        "0"
                      ]
                    },
                    {
                      "type": {
                        "value": "CompareTimer"
                      },
                      "parameters": [
                        "",
                        "\"yarnCoolDownTimer\"",
                        ">=",
                        "1.5"
                      ]
                    },
                    {
                      "type": {
                        "value": "BuiltinCommonInstructions::Once"
                      },
                      "parameters": []
                    }
                  ],
                  "actions": [
                    {
                      "type": {
                        "value": "DialogueTree::GoToNextLine"
                      },
                      "parameters": []
                    }
                  ]
                },
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [
                    {
                      "type": {
                        "value": "DialogueTree::HasClippedTextScrollingCompleted"
                      },
                      "parameters": []
                    },
                    {
                      "type": {
                        "inverted": true,
                        "value": "NumberVariable"
                      },
                      "parameters": [
                        "Time_To_Next_Subtitle_Line",
                        "<=",
                        "0"
                      ]
                    },
                    {
                      "type": {
                        "value": "CompareTimer"
                      },
                      "parameters": [
                        "",
                        "\"yarnCoolDownTimer\"",
                        ">=",
                        "Time_To_Next_Subtitle_Line"
                      ]
                    },
                    {
                      "type": {
                        "value": "BuiltinCommonInstructions::Once"
                      },
                      "parameters": []
                    }
                  ],
                  "actions": [
                    {
                      "type": {
                        "value": "DialogueTree::GoToNextLine"
                      },
                      "parameters": []
                    }
                  ]
                }
              ]
            },
            {
              "type": "BuiltinCommonInstructions::Comment",
              "color": {
                "b": 109,
                "g": 230,
                "r": 255,
                "textB": 0,
                "textG": 0,
                "textR": 0
              },
              "comment": "If we're not in Subtitle Mode..."
            },
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "inverted": true,
                    "value": "BooleanVariable"
                  },
                  "parameters": [
                    "Subtitle_Mode",
                    "True",
                    ""
                  ]
                }
              ],
              "actions": [],
              "events": [
                {
                  "type": "BuiltinCommonInstructions::Comment",
                  "color": {
                    "b": 109,
                    "g": 230,
                    "r": 255,
                    "textB": 0,
                    "textG": 0,
                    "textR": 0
                  },
                  "comment": "clickLengthTimer tracks how long the user is holding down the mouse button or tap.\n\nHeld clicks/taps make the text scroll quicker.\n\nQuick clicks/taps make the line complete fully."
                },
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [
                    {
                      "type": {
                        "value": "MouseButtonFromTextPressed"
                      },
                      "parameters": [
                        "",
                        "\"Left\""
                      ]
                    },
                    {
                      "type": {
                        "value": "BuiltinCommonInstructions::Once"
                      },
                      "parameters": []
                    }
                  ],
                  "actions": [
                    {
                      "type": {
                        "value": "ResetTimer"
                      },
                      "parameters": [
                        "",
                        "\"clickLengthTimer\""
                      ]
                    }
                  ]
                },
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [
                    {
                      "type": {
                        "value": "BooleanVariable"
                      },
                      "parameters": [
                        "Enable_Click_To_Complete",
                        "True",
                        ""
                      ]
                    },
                    {
                      "type": {
                        "value": "BuiltinCommonInstructions::Or"
                      },
                      "parameters": [],
                      "subInstructions": [
                        {
                          "type": {
                            "value": "KeyFromTextPressed"
                          },
                          "parameters": [
                            "",
                            "Continue_Keybind"
                          ]
                        },
                        {
                          "type": {
                            "value": "BuiltinCommonInstructions::And"
                          },
                          "parameters": [],
                          "subInstructions": [
                            {
                              "type": {
                                "value": "CompareTimer"
                              },
                              "parameters": [
                                "",
                                "\"clickLengthTimer\"",
                                "<",
                                "0.2"
                              ]
                            },
                            {
                              "type": {
                                "value": "MouseButtonFromTextReleased"
                              },
                              "parameters": [
                                "",
                                "\"Left\""
                              ]
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "type": {
                        "value": "BuiltinCommonInstructions::Once"
                      },
                      "parameters": []
                    }
                  ],
                  "actions": [
                    {
                      "type": {
                        "value": "DialogueTree::CompleteClippedTextScrolling"
                      },
                      "parameters": []
                    }
                  ]
                },
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [
                    {
                      "type": {
                        "value": "BooleanVariable"
                      },
                      "parameters": [
                        "Quick_Scroll_Enabled",
                        "True",
                        ""
                      ]
                    },
                    {
                      "type": {
                        "value": "CompareTimer"
                      },
                      "parameters": [
                        "",
                        "\"textScrollSpeed\"",
                        ">",
                        "0.01"
                      ]
                    },
                    {
                      "type": {
                        "value": "BuiltinCommonInstructions::Or"
                      },
                      "parameters": [],
                      "subInstructions": [
                        {
                          "type": {
                            "value": "KeyFromTextPressed"
                          },
                          "parameters": [
                            "",
                            "Continue_Keybind"
                          ]
                        },
                        {
                          "type": {
                            "value": "BuiltinCommonInstructions::And"
                          },
                          "parameters": [],
                          "subInstructions": [
                            {
                              "type": {
                                "value": "MouseButtonFromTextPressed"
                              },
                              "parameters": [
                                "",
                                "\"Left\""
                              ]
                            },
                            {
                              "type": {
                                "value": "CompareTimer"
                              },
                              "parameters": [
                                "",
                                "\"clickLengthTimer\"",
                                ">=",
                                "0.3"
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ],
                  "actions": [
                    {
                      "type": {
                        "value": "DialogueTree::ScrollClippedText"
                      },
                      "parameters": []
                    },
                    {
                      "type": {
                        "value": "ResetTimer"
                      },
                      "parameters": [
                        "",
                        "\"textScrollSpeed\""
                      ]
                    }
                  ]
                },
                {
                  "type": "BuiltinCommonInstructions::Comment",
                  "color": {
                    "b": 109,
                    "g": 230,
                    "r": 255,
                    "textB": 0,
                    "textG": 0,
                    "textR": 0
                  },
                  "comment": "Reset yarnCoolDownTimer timer when text completes scrolling."
                },
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [
                    {
                      "type": {
                        "value": "DialogueTree::HasClippedTextScrollingCompleted"
                      },
                      "parameters": []
                    },
                    {
                      "type": {
                        "value": "BuiltinCommonInstructions::Once"
                      },
                      "parameters": []
                    }
                  ],
                  "actions": [
                    {
                      "type": {
                        "value": "ResetTimer"
                      },
                      "parameters": [
                        "",
                        "\"yarnCoolDownTimer\""
                      ]
                    }
                  ]
                },
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [
                    {
                      "type": {
                        "value": "DialogueTree::HasClippedTextScrollingCompleted"
                      },
                      "parameters": []
                    },
                    {
                      "type": {
                        "value": "BuiltinCommonInstructions::Or"
                      },
                      "parameters": [],
                      "subInstructions": [
                        {
                          "type": {
                            "value": "MouseButtonFromTextPressed"
                          },
                          "parameters": [
                            "",
                            "\"Left\""
                          ]
                        },
                        {
                          "type": {
                            "value": "KeyFromTextPressed"
                          },
                          "parameters": [
                            "",
                            "Continue_Keybind"
                          ]
                        }
                      ]
                    },
                    {
                      "type": {
                        "value": "BuiltinCommonInstructions::Once"
                      },
                      "parameters": []
                    }
                  ],
                  "actions": [
                    {
                      "type": {
                        "value": "ResetTimer"
                      },
                      "parameters": [
                        "",
                        "\"tapHoldClickToContinueTimer\""
                      ]
                    }
                  ]
                },
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [
                    {
                      "type": {
                        "value": "CompareTimer"
                      },
                      "parameters": [
                        "",
                        "\"yarnCoolDownTimer\"",
                        ">=",
                        "0.4"
                      ]
                    },
                    {
                      "type": {
                        "value": "CompareTimer"
                      },
                      "parameters": [
                        "",
                        "\"tapHoldClickToContinueTimer\"",
                        "<=",
                        "0.3"
                      ]
                    },
                    {
                      "type": {
                        "value": "BuiltinCommonInstructions::Or"
                      },
                      "parameters": [],
                      "subInstructions": [
                        {
                          "type": {
                            "value": "MouseButtonFromTextReleased"
                          },
                          "parameters": [
                            "",
                            "\"Left\""
                          ]
                        },
                        {
                          "type": {
                            "value": "KeyFromTextReleased"
                          },
                          "parameters": [
                            "",
                            "Continue_Keybind"
                          ]
                        }
                      ]
                    },
                    {
                      "type": {
                        "value": "BuiltinCommonInstructions::Once"
                      },
                      "parameters": []
                    }
                  ],
                  "actions": [
                    {
                      "type": {
                        "value": "DialogueTree::GoToNextLine"
                      },
                      "parameters": []
                    }
                  ]
                }
              ]
            }
          ]
        }
      ],
      "parameters": [
        {
          "description": "BBText object to output text to with a typewriter effect. (Regular text objects will not work.)",
          "name": "Dialogue_Text",
          "supplementaryInformation": "BBText::BBText",
          "type": "objectList"
        },
        {
          "description": "How quickly do you want the text to scroll in seconds? (Set to 0 for default speed.)",
          "name": "Dialogue_Text_Scroll_Speed",
          "type": "expression"
        },
        {
          "description": "Tap/left click is already enabled by default, so choose a keyboard keybind. If you want the player to choose their keybind, make it a variable.",
          "name": "Continue_Keybind",
          "type": "string"
        },
        {
          "defaultValue": "yes",
          "description": "If disabled, then this makes readers wait until your typewriter effect has finished.",
          "name": "Enable_Click_To_Complete",
          "optional": true,
          "type": "yesorno"
        },
        {
          "defaultValue": "yes",
          "description": "If the user holds down their control (left click, keybind, etc.), do you want it to speed up the text?",
          "name": "Quick_Scroll_Enabled",
          "optional": true,
          "type": "yesorno"
        },
        {
          "description": "Subtitle Mode: Autoplays dialogue. Can be used for cinematics or as an accessibility feature.",
          "name": "Subtitle_Mode",
          "type": "yesorno"
        },
        {
          "description": "For Subtitle Mode: How long do you want the dialogue to pause at the end of each line before switching to the next in seconds? (0 for default.)",
          "name": "Time_To_Next_Subtitle_Line",
          "type": "expression"
        }
      ],
      "objectGroups": []
    }
  ],
  "eventsBasedBehaviors": [],
  "eventsBasedObjects": []
}